package summary

import (
	"testing"
	"time"

	"github.com/stretchr/testify/require"
)

func TestFetcher_Fetch(t *testing.T) {
	t.Run("should make a summary", func(t *testing.T) {
		input := "<img src=\"https://habrastorage.org/getpro/habr/upload_files/17b/4bd/40d/17b4bd40db9478057ec96c515fd70bbe.jpeg\" /><p><em>Выйдя на пенсию и имея много свободного времени, я решил посвятить себя любимому занятию - разработке высоконагруженных финансовых архитектур, ядер и протоколов межбанковского клиринга (</em><a href=\"https://github.com/qazna-org/orda\" rel=\"noopener noreferrer nofollow\"><em>проект Orda</em></a><em>). Я создал </em><a href=\"https://github.com/qazna-org/qazna.org\" rel=\"noopener noreferrer nofollow\"><em>Qazna</em></a><em> - проект, который называю «финансовым Linux», полностью переведенный на строгую открытую лицензию </em><strong><em>GNU AGPLv3</em></strong>.</p><p><em>Ежедневно ковыряясь в архитектуре систем, отлавливая уязвимости на пайплайнах (вроде недавних багов в </em><strong><em>crypto/tls</em></strong><em> в стандартной библиотеке </em><strong><em>Go</em></strong><em>) и выстраивая отказоустойчивые сети, я поймал себя на одной мысли. Мы тратим колоссальные ресурсы на защиту </em><strong><em>серверов</em></strong><em> и </em><strong><em>протоколов</em></strong><em>, но игнорируем самую уязвимую систему с устаревшим </em><strong><em>legacy</em></strong><em>-кодом - нас самих.</em></p><p><em>Этот пост - попытка выйти за рамки классического IT и посмотреть на </em><strong><em>историю</em></strong><em>, </em><strong><em>политику</em></strong><em>, </em><strong><em>общество</em></strong><em> и </em><strong><em>медицину</em></strong><em> через призму системного анализа, </em><strong><em>API-инъекций</em></strong><em> и </em><strong><em>социальной инженерии</em></strong><em>. Документ \"</em><strong><em>Тартар и Я</em></strong><em>\", над которым я работал до этого, натолкнул меня на мысль, что праязык человечества - это не утерянный миф, а живой код. И сегодня я хочу поговорить о том, как этот код </em><strong><em>компилируется</em></strong><em> в нашу реальность.</em></p><p>Когда мы говорим о программировании, мы по привычке представляем кремниевые процессоры, серверные стойки и строки кода на <strong>Python</strong>, <strong>Go</strong> или <strong>C++</strong>. Но мы упускаем из виду одну фундаментальную вещь: задолго до появления первых ЭВМ человечество уже создало мощнейший язык программирования - нашу речь.</p><p>Язык - это не просто средство коммуникации. Это низкоуровневый фреймворк, на котором «крутится» наше <strong>сознание</strong>. Как я отмечал в материалах к исследованию \"Тартар и Я\", слова несут в себе архетипические смыслы, формирующие саму логику мышления. И если мы признаем, что человек программируется языком, возникает закономерный вопрос: насколько хорошо защищена наша внутренняя операционная система? </p> <a href=\"https://habr.com/ru/articles/1002350/?utm_campaign=1002350&amp;utm_source=habrahabr&amp;utm_medium=rss#habracut\">Читать далее</a><img src=\"https://habrastorage.org/getpro/habr/upload_files/17b/4bd/40d/17b4bd40db9478057ec96c515fd70bbe.jpeg\" /><p><em>Выйдя на пенсию и имея много свободного времени, я решил посвятить себя любимому занятию - разработке высоконагруженных финансовых архитектур, ядер и протоколов межбанковского клиринга (</em><a href=\"https://github.com/qazna-org/orda\" rel=\"noopener noreferrer nofollow\"><em>проект Orda</em></a><em>). Я создал </em><a href=\"https://github.com/qazna-org/qazna.org\" rel=\"noopener noreferrer nofollow\"><em>Qazna</em></a><em> - проект, который называю «финансовым Linux», полностью переведенный на строгую открытую лицензию </em><strong><em>GNU AGPLv3</em></strong>.</p><p><em>Ежедневно ковыряясь в архитектуре систем, отлавливая уязвимости на пайплайнах (вроде недавних багов в </em><strong><em>crypto/tls</em></strong><em> в стандартной библиотеке </em><strong><em>Go</em></strong><em>) и выстраивая отказоустойчивые сети, я поймал себя на одной мысли. Мы тратим колоссальные ресурсы на защиту </em><strong><em>серверов</em></strong><em> и </em><strong><em>протоколов</em></strong><em>, но игнорируем самую уязвимую систему с устаревшим </em><strong><em>legacy</em></strong><em>-кодом - нас самих.</em></p><p><em>Этот пост - попытка выйти за рамки классического IT и посмотреть на </em><strong><em>историю</em></strong><em>, </em><strong><em>политику</em></strong><em>, </em><strong><em>общество</em></strong><em> и </em><strong><em>медицину</em></strong><em> через призму системного анализа, </em><strong><em>API-инъекций</em></strong><em> и </em><strong><em>социальной инженерии</em></strong><em>. Документ \"</em><strong><em>Тартар и Я</em></strong><em>\", над которым я работал до этого, натолкнул меня на мысль, что праязык человечества - это не утерянный миф, а живой код. И сегодня я хочу поговорить о том, как этот код </em><strong><em>компилируется</em></strong><em> в нашу реальность.</em></p><p>Когда мы говорим о программировании, мы по привычке представляем кремниевые процессоры, серверные стойки и строки кода на <strong>Python</strong>, <strong>Go</strong> или <strong>C++</strong>. Но мы упускаем из виду одну фундаментальную вещь: задолго до появления первых ЭВМ человечество уже создало мощнейший язык программирования - нашу речь.</p><p>Язык - это не просто средство коммуникации. Это низкоуровневый фреймворк, на котором «крутится» наше <strong>сознание</strong>. Как я отмечал в материалах к исследованию \"Тартар и Я\", слова несут в себе архетипические смыслы, формирующие саму логику мышления. И если мы признаем, что человек программируется языком, возникает закономерный вопрос: насколько хорошо защищена наша внутренняя операционная система? </p> <a href=\"https://habr.com/ru/articles/1002350/?utm_campaign=1002350&amp;utm_source=habrahabr&amp;utm_medium=rss#habracut\">Читать далее</a>"
		oc := NewOllamaSummarizer("10.1.1.16:11434", "Make Short summary in Russian", "llama3.1:8b-instruct-q4_K_M", 5*time.Minute)
		result, err := oc.Summarize(input)

		require.NoError(t, err)

		t.Log(result)
	})
}
